pipeline {
    agent any
    parameters {
        string(name: 'GITLAB_REPO_URL', description: 'URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitLab')
        string(name: 'COMMIT_SHA', description: '–•–µ—à –∫–æ–º–º–∏—Ç–∞')
    }
    stages {
        stage('Clone') {
            steps {
                script {
                    echo "üîß –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: ${params.GITLAB_REPO_URL}"
                    sh """
                        git clone ${params.GITLAB_REPO_URL} src
                        cd src
                        git checkout ${params.COMMIT_SHA}
                        echo "‚úÖ –ö–æ–¥ —É—Å–ø–µ—à–Ω–æ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω!"
                    """
                }
            }
        }
        stage('Info') {
            steps {
                echo "üîç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:"
                echo "Repository: ${params.GITLAB_REPO_URL}"
                echo "Commit: ${params.COMMIT_SHA}"
                sh 'cd src && git log -1 --oneline'
            }
        }
    }
}
